[ Skip to content ](https://ai.pydantic.dev/api/models/base/<#pydantic_aimodels>)
[ ![logo](https://ai.pydantic.dev/img/logo-white.svg) ](https://ai.pydantic.dev/api/models/base/..> "PydanticAI")
PydanticAI 
pydantic_ai.models 
Type to start searching
[ pydantic/pydantic-ai  ](https://ai.pydantic.dev/api/models/base/<https:/github.com/pydantic/pydantic-ai> "Go to repository")
[ ![logo](https://ai.pydantic.dev/img/logo-white.svg) ](https://ai.pydantic.dev/api/models/base/..> "PydanticAI") PydanticAI 
[ pydantic/pydantic-ai  ](https://ai.pydantic.dev/api/models/base/<https:/github.com/pydantic/pydantic-ai> "Go to repository")
  * [ Introduction  ](https://ai.pydantic.dev/api/models/base/..>)
  * [ Installation  ](https://ai.pydantic.dev/api/models/install/>)
  * [ Getting Help  ](https://ai.pydantic.dev/api/models/help/>)
  * [ Contributing  ](https://ai.pydantic.dev/api/models/contributing/>)
  * [ Troubleshooting  ](https://ai.pydantic.dev/api/models/troubleshooting/>)
  * Documentation  Documentation 
    * [ Agents  ](https://ai.pydantic.dev/api/models/agents/>)
    * [ Models  ](https://ai.pydantic.dev/api/models/models/>)
    * [ Dependencies  ](https://ai.pydantic.dev/api/models/dependencies/>)
    * [ Function Tools  ](https://ai.pydantic.dev/api/models/tools/>)
    * [ Results  ](https://ai.pydantic.dev/api/models/results/>)
    * [ Messages and chat history  ](https://ai.pydantic.dev/api/models/message-history/>)
    * [ Testing and Evals  ](https://ai.pydantic.dev/api/models/testing-evals/>)
    * [ Debugging and Monitoring  ](https://ai.pydantic.dev/api/models/logfire/>)
    * [ Multi-agent Applications  ](https://ai.pydantic.dev/api/models/multi-agent-applications/>)
    * [ Graphs  ](https://ai.pydantic.dev/api/models/graph/>)
  * [ Examples  ](https://ai.pydantic.dev/api/models/examples/>)
Examples 
    * [ Pydantic Model  ](https://ai.pydantic.dev/api/models/examples/pydantic-model/>)
    * [ Weather agent  ](https://ai.pydantic.dev/api/models/examples/weather-agent/>)
    * [ Bank support  ](https://ai.pydantic.dev/api/models/examples/bank-support/>)
    * [ SQL Generation  ](https://ai.pydantic.dev/api/models/examples/sql-gen/>)
    * [ Flight booking  ](https://ai.pydantic.dev/api/models/examples/flight-booking/>)
    * [ RAG  ](https://ai.pydantic.dev/api/models/examples/rag/>)
    * [ Stream markdown  ](https://ai.pydantic.dev/api/models/examples/stream-markdown/>)
    * [ Stream whales  ](https://ai.pydantic.dev/api/models/examples/stream-whales/>)
    * [ Chat App with FastAPI  ](https://ai.pydantic.dev/api/models/examples/chat-app/>)
    * [ Question Graph  ](https://ai.pydantic.dev/api/models/examples/question-graph/>)
  * API Reference  API Reference 
    * [ pydantic_ai.agent  ](https://ai.pydantic.dev/api/models/base/agent/>)
    * [ pydantic_ai.tools  ](https://ai.pydantic.dev/api/models/base/tools/>)
    * [ pydantic_ai.result  ](https://ai.pydantic.dev/api/models/base/result/>)
    * [ pydantic_ai.messages  ](https://ai.pydantic.dev/api/models/base/messages/>)
    * [ pydantic_ai.exceptions  ](https://ai.pydantic.dev/api/models/base/exceptions/>)
    * [ pydantic_ai.settings  ](https://ai.pydantic.dev/api/models/base/settings/>)
    * [ pydantic_ai.usage  ](https://ai.pydantic.dev/api/models/base/usage/>)
    * [ pydantic_ai.format_as_xml  ](https://ai.pydantic.dev/api/models/base/format_as_xml/>)
    * pydantic_ai.models  [ pydantic_ai.models  ](https://ai.pydantic.dev/api/models/base/<./>) Table of contents 
      * [ models  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models>)
      * [ KnownModelName  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.KnownModelName>)
      * [ Model  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.Model>)
        * [ agent_model  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.Model.agent_model>)
      * [ AgentModel  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.AgentModel>)
        * [ request  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.AgentModel.request>)
        * [ request_stream  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.AgentModel.request_stream>)
      * [ StreamedResponse  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamedResponse>)
        * [ __aiter__  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamedResponse.__aiter__>)
        * [ get  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamedResponse.get>)
        * [ model_name  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamedResponse.model_name>)
        * [ usage  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamedResponse.usage>)
        * [ timestamp  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamedResponse.timestamp>)
      * [ ALLOW_MODEL_REQUESTS  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.ALLOW_MODEL_REQUESTS>)
      * [ check_allow_model_requests  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.check_allow_model_requests>)
      * [ override_allow_model_requests  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.override_allow_model_requests>)
    * [ pydantic_ai.models.openai  ](https://ai.pydantic.dev/api/models/base/<../openai/>)
    * [ pydantic_ai.models.anthropic  ](https://ai.pydantic.dev/api/models/base/<../anthropic/>)
    * [ pydantic_ai.models.cohere  ](https://ai.pydantic.dev/api/models/base/<../cohere/>)
    * [ pydantic_ai.models.gemini  ](https://ai.pydantic.dev/api/models/base/<../gemini/>)
    * [ pydantic_ai.models.vertexai  ](https://ai.pydantic.dev/api/models/base/<../vertexai/>)
    * [ pydantic_ai.models.groq  ](https://ai.pydantic.dev/api/models/base/<../groq/>)
    * [ pydantic_ai.models.mistral  ](https://ai.pydantic.dev/api/models/base/<../mistral/>)
    * [ pydantic_ai.models.test  ](https://ai.pydantic.dev/api/models/base/<../test/>)
    * [ pydantic_ai.models.function  ](https://ai.pydantic.dev/api/models/base/<../function/>)
    * [ pydantic_graph  ](https://ai.pydantic.dev/api/models/base/pydantic_graph/graph/>)
    * [ pydantic_graph.nodes  ](https://ai.pydantic.dev/api/models/base/pydantic_graph/nodes/>)
    * [ pydantic_graph.state  ](https://ai.pydantic.dev/api/models/base/pydantic_graph/state/>)
    * [ pydantic_graph.mermaid  ](https://ai.pydantic.dev/api/models/base/pydantic_graph/mermaid/>)
    * [ pydantic_graph.exceptions  ](https://ai.pydantic.dev/api/models/base/pydantic_graph/exceptions/>)


Table of contents 
  * [ models  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models>)
  * [ KnownModelName  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.KnownModelName>)
  * [ Model  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.Model>)
    * [ agent_model  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.Model.agent_model>)
  * [ AgentModel  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.AgentModel>)
    * [ request  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.AgentModel.request>)
    * [ request_stream  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.AgentModel.request_stream>)
  * [ StreamedResponse  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamedResponse>)
    * [ __aiter__  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamedResponse.__aiter__>)
    * [ get  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamedResponse.get>)
    * [ model_name  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamedResponse.model_name>)
    * [ usage  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamedResponse.usage>)
    * [ timestamp  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamedResponse.timestamp>)
  * [ ALLOW_MODEL_REQUESTS  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.ALLOW_MODEL_REQUESTS>)
  * [ check_allow_model_requests  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.check_allow_model_requests>)
  * [ override_allow_model_requests  ](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.override_allow_model_requests>)


  1. [ Introduction  ](https://ai.pydantic.dev/api/models/base/..>)
  2. [ API Reference  ](https://ai.pydantic.dev/api/models/base/agent/>)


Version Notice
This documentation is ahead of the last release by [1 commit](https://ai.pydantic.dev/api/models/base/<https:/github.com/pydantic/pydantic-ai/compare/v0.0.21...main>). You may see documentation for features not yet supported in the latest release [v0.0.21 2025-01-30](https://ai.pydantic.dev/api/models/base/<https:/github.com/pydantic/pydantic-ai/releases/tag/v0.0.21>). 
# `pydantic_ai.models`
Logic related to making requests to an LLM.
The aim here is to make a common interface for different LLMs, so that the rest of the code can be agnostic to the specific LLM being used.
###  KnownModelName `module-attribute`
```
KnownModelName = Literal[](https://ai.pydantic.dev/api/models/base/<https:/typing-extensions.readthedocs.io/en/latest/index.html#typing_extensions.Literal> "typing_extensions.Literal")[
  "anthropic:claude-3-5-haiku-latest",
  "anthropic:claude-3-5-sonnet-latest",
  "anthropic:claude-3-opus-latest",
  "claude-3-5-haiku-latest",
  "claude-3-5-sonnet-latest",
  "claude-3-opus-latest",
  "cohere:c4ai-aya-expanse-32b",
  "cohere:c4ai-aya-expanse-8b",
  "cohere:command",
  "cohere:command-light",
  "cohere:command-light-nightly",
  "cohere:command-nightly",
  "cohere:command-r",
  "cohere:command-r-03-2024",
  "cohere:command-r-08-2024",
  "cohere:command-r-plus",
  "cohere:command-r-plus-04-2024",
  "cohere:command-r-plus-08-2024",
  "cohere:command-r7b-12-2024",
  "google-gla:gemini-1.0-pro",
  "google-gla:gemini-1.5-flash",
  "google-gla:gemini-1.5-flash-8b",
  "google-gla:gemini-1.5-pro",
  "google-gla:gemini-2.0-flash-exp",
  "google-vertex:gemini-1.0-pro",
  "google-vertex:gemini-1.5-flash",
  "google-vertex:gemini-1.5-flash-8b",
  "google-vertex:gemini-1.5-pro",
  "google-vertex:gemini-2.0-flash-exp",
  "gpt-3.5-turbo",
  "gpt-3.5-turbo-0125",
  "gpt-3.5-turbo-0301",
  "gpt-3.5-turbo-0613",
  "gpt-3.5-turbo-1106",
  "gpt-3.5-turbo-16k",
  "gpt-3.5-turbo-16k-0613",
  "gpt-4",
  "gpt-4-0125-preview",
  "gpt-4-0314",
  "gpt-4-0613",
  "gpt-4-1106-preview",
  "gpt-4-32k",
  "gpt-4-32k-0314",
  "gpt-4-32k-0613",
  "gpt-4-turbo",
  "gpt-4-turbo-2024-04-09",
  "gpt-4-turbo-preview",
  "gpt-4-vision-preview",
  "gpt-4o",
  "gpt-4o-2024-05-13",
  "gpt-4o-2024-08-06",
  "gpt-4o-2024-11-20",
  "gpt-4o-audio-preview",
  "gpt-4o-audio-preview-2024-10-01",
  "gpt-4o-audio-preview-2024-12-17",
  "gpt-4o-mini",
  "gpt-4o-mini-2024-07-18",
  "gpt-4o-mini-audio-preview",
  "gpt-4o-mini-audio-preview-2024-12-17",
  "groq:gemma2-9b-it",
  "groq:llama-3.1-8b-instant",
  "groq:llama-3.2-11b-vision-preview",
  "groq:llama-3.2-1b-preview",
  "groq:llama-3.2-3b-preview",
  "groq:llama-3.2-90b-vision-preview",
  "groq:llama-3.3-70b-specdec",
  "groq:llama-3.3-70b-versatile",
  "groq:llama3-70b-8192",
  "groq:llama3-8b-8192",
  "groq:mixtral-8x7b-32768",
  "mistral:codestral-latest",
  "mistral:mistral-large-latest",
  "mistral:mistral-moderation-latest",
  "mistral:mistral-small-latest",
  "o1",
  "o1-2024-12-17",
  "o1-mini",
  "o1-mini-2024-09-12",
  "o1-preview",
  "o1-preview-2024-09-12",
  "openai:chatgpt-4o-latest",
  "openai:gpt-3.5-turbo",
  "openai:gpt-3.5-turbo-0125",
  "openai:gpt-3.5-turbo-0301",
  "openai:gpt-3.5-turbo-0613",
  "openai:gpt-3.5-turbo-1106",
  "openai:gpt-3.5-turbo-16k",
  "openai:gpt-3.5-turbo-16k-0613",
  "openai:gpt-4",
  "openai:gpt-4-0125-preview",
  "openai:gpt-4-0314",
  "openai:gpt-4-0613",
  "openai:gpt-4-1106-preview",
  "openai:gpt-4-32k",
  "openai:gpt-4-32k-0314",
  "openai:gpt-4-32k-0613",
  "openai:gpt-4-turbo",
  "openai:gpt-4-turbo-2024-04-09",
  "openai:gpt-4-turbo-preview",
  "openai:gpt-4-vision-preview",
  "openai:gpt-4o",
  "openai:gpt-4o-2024-05-13",
  "openai:gpt-4o-2024-08-06",
  "openai:gpt-4o-2024-11-20",
  "openai:gpt-4o-audio-preview",
  "openai:gpt-4o-audio-preview-2024-10-01",
  "openai:gpt-4o-audio-preview-2024-12-17",
  "openai:gpt-4o-mini",
  "openai:gpt-4o-mini-2024-07-18",
  "openai:gpt-4o-mini-audio-preview",
  "openai:gpt-4o-mini-audio-preview-2024-12-17",
  "openai:o1",
  "openai:o1-2024-12-17",
  "openai:o1-mini",
  "openai:o1-mini-2024-09-12",
  "openai:o1-preview",
  "openai:o1-preview-2024-09-12",
  "test",
]

```

Known model names that can be used with the `model` parameter of `Agent`[](https://ai.pydantic.dev/api/models/base/agent/#pydantic_ai.agent.Agent>).
`KnownModelName` is provided as a concise way to specify a model.
###  Model
Bases: `ABC[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/abc.html#abc.ABC> "abc.ABC")`
Abstract class for a model.
Source code in `pydantic_ai_slim/pydantic_ai/models/__init__.py`
```
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
```
| ```
class Model(ABC):
"""Abstract class for a model."""
  @abstractmethod
  async def agent_model(
    self,
    *,
    function_tools: list[ToolDefinition],
    allow_text_result: bool,
    result_tools: list[ToolDefinition],
  ) -> AgentModel:
"""Create an agent model, this is called for each step of an agent run.
    This is async in case slow/async config checks need to be performed that can't be done in `__init__`.
    Args:
      function_tools: The tools available to the agent.
      allow_text_result: Whether a plain text final response/result is permitted.
      result_tools: Tool definitions for the final result tool(s), if any.
    Returns:
      An agent model.
    """
    raise NotImplementedError()
  @abstractmethod
  def name(self) -> str:
    raise NotImplementedError()

```
  
---|---  
####  agent_model `abstractmethod` `async`
```
agent_model(
  *,
  function_tools: list[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/stdtypes.html#list>)[ToolDefinition[](https://ai.pydantic.dev/api/models/base/tools/#pydantic_ai.tools.ToolDefinition> "pydantic_ai.tools.ToolDefinition")],
  allow_text_result: bool[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/functions.html#bool>),
  result_tools: list[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/stdtypes.html#list>)[ToolDefinition[](https://ai.pydantic.dev/api/models/base/tools/#pydantic_ai.tools.ToolDefinition> "pydantic_ai.tools.ToolDefinition")]
) -> AgentModel[](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.AgentModel> "pydantic_ai.models.AgentModel")

```

Create an agent model, this is called for each step of an agent run.
This is async in case slow/async config checks need to be performed that can't be done in `__init__`.
Parameters:
Name | Type | Description | Default  
---|---|---|---  
`function_tools` |  `list[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/stdtypes.html#list>)[ToolDefinition[](https://ai.pydantic.dev/api/models/base/tools/#pydantic_ai.tools.ToolDefinition> "pydantic_ai.tools.ToolDefinition")]` |  The tools available to the agent. |  _required_  
`allow_text_result` |  `bool[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/functions.html#bool>)` |  Whether a plain text final response/result is permitted. |  _required_  
`result_tools` |  `list[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/stdtypes.html#list>)[ToolDefinition[](https://ai.pydantic.dev/api/models/base/tools/#pydantic_ai.tools.ToolDefinition> "pydantic_ai.tools.ToolDefinition")]` |  Tool definitions for the final result tool(s), if any. |  _required_  
Returns:
Type | Description  
---|---  
`AgentModel[](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.AgentModel> "pydantic_ai.models.AgentModel")` |  An agent model.  
Source code in `pydantic_ai_slim/pydantic_ai/models/__init__.py`
```
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
```
| ```
@abstractmethod
async def agent_model(
  self,
  *,
  function_tools: list[ToolDefinition],
  allow_text_result: bool,
  result_tools: list[ToolDefinition],
) -> AgentModel:
"""Create an agent model, this is called for each step of an agent run.
  This is async in case slow/async config checks need to be performed that can't be done in `__init__`.
  Args:
    function_tools: The tools available to the agent.
    allow_text_result: Whether a plain text final response/result is permitted.
    result_tools: Tool definitions for the final result tool(s), if any.
  Returns:
    An agent model.
  """
  raise NotImplementedError()

```
  
---|---  
###  AgentModel
Bases: `ABC[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/abc.html#abc.ABC> "abc.ABC")`
Model configured for each step of an Agent run.
Source code in `pydantic_ai_slim/pydantic_ai/models/__init__.py`
```
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
```
| ```
class AgentModel(ABC):
"""Model configured for each step of an Agent run."""
  @abstractmethod
  async def request(
    self, messages: list[ModelMessage], model_settings: ModelSettings | None
  ) -> tuple[ModelResponse, Usage]:
"""Make a request to the model."""
    raise NotImplementedError()
  @asynccontextmanager
  async def request_stream(
    self, messages: list[ModelMessage], model_settings: ModelSettings | None
  ) -> AsyncIterator[StreamedResponse]:
"""Make a request to the model and return a streaming response."""
    # This method is not required, but you need to implement it if you want to support streamed responses
    raise NotImplementedError(f'Streamed requests not supported by this {self.__class__.__name__}')
    # yield is required to make this a generator for type checking
    # noinspection PyUnreachableCode
    yield # pragma: no cover

```
  
---|---  
####  request `abstractmethod` `async`
```
request(
  messages: list[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/stdtypes.html#list>)[ModelMessage[](https://ai.pydantic.dev/api/models/base/messages/#pydantic_ai.messages.ModelMessage> "pydantic_ai.messages.ModelMessage")],
  model_settings: ModelSettings[](https://ai.pydantic.dev/api/models/base/settings/#pydantic_ai.settings.ModelSettings> "pydantic_ai.settings.ModelSettings") | None,
) -> tuple[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/stdtypes.html#tuple>)[ModelResponse[](https://ai.pydantic.dev/api/models/base/messages/#pydantic_ai.messages.ModelResponse> "pydantic_ai.messages.ModelResponse"), Usage[](https://ai.pydantic.dev/api/models/base/usage/#pydantic_ai.usage.Usage> "pydantic_ai.usage.Usage")]

```

Make a request to the model.
Source code in `pydantic_ai_slim/pydantic_ai/models/__init__.py`
```
189
190
191
192
193
194
```
| ```
@abstractmethod
async def request(
  self, messages: list[ModelMessage], model_settings: ModelSettings | None
) -> tuple[ModelResponse, Usage]:
"""Make a request to the model."""
  raise NotImplementedError()

```
  
---|---  
####  request_stream `async`
```
request_stream(
  messages: list[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/stdtypes.html#list>)[ModelMessage[](https://ai.pydantic.dev/api/models/base/messages/#pydantic_ai.messages.ModelMessage> "pydantic_ai.messages.ModelMessage")],
  model_settings: ModelSettings[](https://ai.pydantic.dev/api/models/base/settings/#pydantic_ai.settings.ModelSettings> "pydantic_ai.settings.ModelSettings") | None,
) -> AsyncIterator[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator> "collections.abc.AsyncIterator")[StreamedResponse[](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.StreamedResponse> "pydantic_ai.models.StreamedResponse")]

```

Make a request to the model and return a streaming response.
Source code in `pydantic_ai_slim/pydantic_ai/models/__init__.py`
```
196
197
198
199
200
201
202
203
204
205
```
| ```
@asynccontextmanager
async def request_stream(
  self, messages: list[ModelMessage], model_settings: ModelSettings | None
) -> AsyncIterator[StreamedResponse]:
"""Make a request to the model and return a streaming response."""
  # This method is not required, but you need to implement it if you want to support streamed responses
  raise NotImplementedError(f'Streamed requests not supported by this {self.__class__.__name__}')
  # yield is required to make this a generator for type checking
  # noinspection PyUnreachableCode
  yield # pragma: no cover

```
  
---|---  
###  StreamedResponse `dataclass`
Bases: `ABC[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/abc.html#abc.ABC> "abc.ABC")`
Streamed response from an LLM when calling a tool.
Source code in `pydantic_ai_slim/pydantic_ai/models/__init__.py`
```
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
```
| ```
@dataclass
class StreamedResponse(ABC):
"""Streamed response from an LLM when calling a tool."""
  _model_name: str
  _usage: Usage = field(default_factory=Usage, init=False)
  _parts_manager: ModelResponsePartsManager = field(default_factory=ModelResponsePartsManager, init=False)
  _event_iterator: AsyncIterator[ModelResponseStreamEvent] | None = field(default=None, init=False)
  def __aiter__(self) -> AsyncIterator[ModelResponseStreamEvent]:
"""Stream the response as an async iterable of [`ModelResponseStreamEvent`][pydantic_ai.messages.ModelResponseStreamEvent]s."""
    if self._event_iterator is None:
      self._event_iterator = self._get_event_iterator()
    return self._event_iterator
  @abstractmethod
  async def _get_event_iterator(self) -> AsyncIterator[ModelResponseStreamEvent]:
"""Return an async iterator of [`ModelResponseStreamEvent`][pydantic_ai.messages.ModelResponseStreamEvent]s.
    This method should be implemented by subclasses to translate the vendor-specific stream of events into
    pydantic_ai-format events.
    """
    raise NotImplementedError()
    # noinspection PyUnreachableCode
    yield
  def get(self) -> ModelResponse:
"""Build a [`ModelResponse`][pydantic_ai.messages.ModelResponse] from the data received from the stream so far."""
    return ModelResponse(
      parts=self._parts_manager.get_parts(), model_name=self._model_name, timestamp=self.timestamp()
    )
  def model_name(self) -> str:
"""Get the model name of the response."""
    return self._model_name
  def usage(self) -> Usage:
"""Get the usage of the response so far. This will not be the final usage until the stream is exhausted."""
    return self._usage
  @abstractmethod
  def timestamp(self) -> datetime:
"""Get the timestamp of the response."""
    raise NotImplementedError()

```
  
---|---  
####  __aiter__
```
__aiter__() -> AsyncIterator[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator> "collections.abc.AsyncIterator")[ModelResponseStreamEvent[](https://ai.pydantic.dev/api/models/base/messages/#pydantic_ai.messages.ModelResponseStreamEvent> "pydantic_ai.messages.ModelResponseStreamEvent")]

```

Stream the response as an async iterable of `ModelResponseStreamEvent`[](https://ai.pydantic.dev/api/models/base/messages/#pydantic_ai.messages.ModelResponseStreamEvent>)s.
Source code in `pydantic_ai_slim/pydantic_ai/models/__init__.py`
```
217
218
219
220
221
```
| ```
def __aiter__(self) -> AsyncIterator[ModelResponseStreamEvent]:
"""Stream the response as an async iterable of [`ModelResponseStreamEvent`][pydantic_ai.messages.ModelResponseStreamEvent]s."""
  if self._event_iterator is None:
    self._event_iterator = self._get_event_iterator()
  return self._event_iterator

```
  
---|---  
####  get
```
get() -> ModelResponse[](https://ai.pydantic.dev/api/models/base/messages/#pydantic_ai.messages.ModelResponse> "pydantic_ai.messages.ModelResponse")

```

Build a `ModelResponse`[](https://ai.pydantic.dev/api/models/base/messages/#pydantic_ai.messages.ModelResponse>) from the data received from the stream so far.
Source code in `pydantic_ai_slim/pydantic_ai/models/__init__.py`
```
234
235
236
237
238
```
| ```
def get(self) -> ModelResponse:
"""Build a [`ModelResponse`][pydantic_ai.messages.ModelResponse] from the data received from the stream so far."""
  return ModelResponse(
    parts=self._parts_manager.get_parts(), model_name=self._model_name, timestamp=self.timestamp()
  )

```
  
---|---  
####  model_name
```
model_name() -> str[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/stdtypes.html#str>)

```

Get the model name of the response.
Source code in `pydantic_ai_slim/pydantic_ai/models/__init__.py`
```
240
241
242
```
| ```
def model_name(self) -> str:
"""Get the model name of the response."""
  return self._model_name

```
  
---|---  
####  usage
```
usage() -> Usage[](https://ai.pydantic.dev/api/models/base/usage/#pydantic_ai.usage.Usage> "pydantic_ai.usage.Usage")

```

Get the usage of the response so far. This will not be the final usage until the stream is exhausted.
Source code in `pydantic_ai_slim/pydantic_ai/models/__init__.py`
```
244
245
246
```
| ```
def usage(self) -> Usage:
"""Get the usage of the response so far. This will not be the final usage until the stream is exhausted."""
  return self._usage

```
  
---|---  
####  timestamp `abstractmethod`
```
timestamp() -> datetime[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/datetime.html#datetime.datetime> "datetime.datetime")

```

Get the timestamp of the response.
Source code in `pydantic_ai_slim/pydantic_ai/models/__init__.py`
```
248
249
250
251
```
| ```
@abstractmethod
def timestamp(self) -> datetime:
"""Get the timestamp of the response."""
  raise NotImplementedError()

```
  
---|---  
###  ALLOW_MODEL_REQUESTS `module-attribute`
```
ALLOW_MODEL_REQUESTS = True

```

Whether to allow requests to models.
This global setting allows you to disable request to most models, e.g. to make sure you don't accidentally make costly requests to a model during tests.
The testing models `TestModel`[](https://ai.pydantic.dev/api/models/base/<../test/#pydantic_ai.models.test.TestModel>) and `FunctionModel`[](https://ai.pydantic.dev/api/models/base/<../function/#pydantic_ai.models.function.FunctionModel>) are no affected by this setting.
###  check_allow_model_requests
```
check_allow_model_requests() -> None

```

Check if model requests are allowed.
If you're defining your own models that have costs or latency associated with their use, you should call this in `Model.agent_model`[](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.Model.agent_model>).
Raises:
Type | Description  
---|---  
`RuntimeError[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/exceptions.html#RuntimeError>)` |  If model requests are not allowed.  
Source code in `pydantic_ai_slim/pydantic_ai/models/__init__.py`
```
265
266
267
268
269
270
271
272
273
274
275
```
| ```
def check_allow_model_requests() -> None:
"""Check if model requests are allowed.
  If you're defining your own models that have costs or latency associated with their use, you should call this in
  [`Model.agent_model`][pydantic_ai.models.Model.agent_model].
  Raises:
    RuntimeError: If model requests are not allowed.
  """
  if not ALLOW_MODEL_REQUESTS:
    raise RuntimeError('Model requests are not allowed, since ALLOW_MODEL_REQUESTS is False')

```
  
---|---  
###  override_allow_model_requests
```
override_allow_model_requests(
  allow_model_requests: bool[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/functions.html#bool>),
) -> Iterator[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/collections.abc.html#collections.abc.Iterator> "collections.abc.Iterator")[None]

```

Context manager to temporarily override `ALLOW_MODEL_REQUESTS`[](https://ai.pydantic.dev/api/models/base/<#pydantic_ai.models.ALLOW_MODEL_REQUESTS>).
Parameters:
Name | Type | Description | Default  
---|---|---|---  
`allow_model_requests` |  `bool[](https://ai.pydantic.dev/api/models/base/<https:/docs.python.org/3/library/functions.html#bool>)` |  Whether to allow model requests within the context. |  _required_  
Source code in `pydantic_ai_slim/pydantic_ai/models/__init__.py`
```
278
279
280
281
282
283
284
285
286
287
288
289
290
291
```
| ```
@contextmanager
def override_allow_model_requests(allow_model_requests: bool) -> Iterator[None]:
"""Context manager to temporarily override [`ALLOW_MODEL_REQUESTS`][pydantic_ai.models.ALLOW_MODEL_REQUESTS].
  Args:
    allow_model_requests: Whether to allow model requests within the context.
  """
  global ALLOW_MODEL_REQUESTS
  old_value = ALLOW_MODEL_REQUESTS
  ALLOW_MODEL_REQUESTS = allow_model_requests # pyright: ignore[reportConstantRedefinition]
  try:
    yield
  finally:
    ALLOW_MODEL_REQUESTS = old_value # pyright: ignore[reportConstantRedefinition]

```
  
---|---  
© Pydantic Services Inc. 2024 to present 
